{"version":3,"file":"commands.js","sourceRoot":"/","sources":["game/admin/commands.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,+DAA4D;AAC5D,yCAAkD;AAClD,2EAA6D;AAC7D,wEAA0D;AAC1D,yEAA2D;AAC3D,sEAAwD;AAExD,MAAa,yBAAyB;IAAtC;QACE,SAAI,GAAG,WAAW,CAAC;QACnB,UAAK,GAAG,IAAI,CAAC;IAYf,CAAC;IAVC,OAAO,CAAC,MAAc,EAAE,IAAS;QAC/B,OAAO,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,4BAA4B,IAAI,EAAE,CAAC,CAAC;QAEvE,mBAAU,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;YACjB,CAAC,CAAC,gBAAgB,CAAC;gBACjB,KAAK,EAAE,cAAc;gBACrB,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;aACxB,CAAC,CAAC;QACL,CAAC,CAAC,CAAA;IACJ,CAAC;CACF;AAdD,8DAcC;AACD,iCAAe,CAAC,QAAQ,CAAC,IAAI,yBAAyB,EAAE,CAAC,CAAC;AAE1D,MAAa,WAAW;IAAxB;QACE,SAAI,GAAG,aAAa,CAAC;QACrB,UAAK,GAAG,QAAQ,CAAC;IAUnB,CAAC;IARC,OAAO,CAAC,MAAc,EAAE,IAAS;QAC/B,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5B,MAAM,CAAC,gBAAgB,CAAC;YACtB,KAAK,EAAE,cAAc;YACrB,OAAO,EAAE,4BAA4B;SACtC,CAAC,CAAC;IACL,CAAC;CACF;AAZD,kCAYC;AACD,iCAAe,CAAC,QAAQ,CAAC,IAAI,WAAW,EAAE,CAAC,CAAC;AAE5C,MAAa,QAAQ;IAArB;QACE,SAAI,GAAG,UAAU,CAAC;QAClB,UAAK,GAAG,OAAO,CAAC;QAChB,UAAK,GAAG,IAAI,CAAC;IA8Bf,CAAC;IA5BO,YAAY,CAAC,MAAc,EAAE,IAAS;;YAC1C,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;YAE7B,IAAI,YAAY,GAAG,YAAY,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAA;YACnD,IAAI,YAAY,IAAI,IAAI,EAAE;gBACxB,MAAM,CAAC,gBAAgB,CAAC;oBACtB,KAAK,EAAE,cAAc;oBACrB,OAAO,EAAE,SAAS,GAAG,QAAQ,GAAG,sBAAsB;iBACvD,CAAC,CAAC;gBACH,OAAO;aACR;YAED,IAAI,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,IAAI,IAAI,EAAE;gBAC1C,MAAM,CAAC,gBAAgB,CAAC;oBACtB,KAAK,EAAE,cAAc;oBACrB,OAAO,EAAE,oCAAoC;iBAC9C,CAAC,CAAC;gBACH,OAAO;aACR;YAED,MAAM,WAAW,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,EAAE,YAAY,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;YACpF,MAAM,gBAAgB,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;YAEtE,MAAM,CAAC,gBAAgB,CAAC;gBACtB,KAAK,EAAE,cAAc;gBACrB,OAAO,EAAE,qBAAqB,GAAG,QAAQ,GAAG,GAAG;aAChD,CAAC,CAAC;QACL,CAAC;KAAA;CACF;AAjCD,4BAiCC;AACD,iCAAe,CAAC,QAAQ,CAAC,IAAI,QAAQ,EAAE,CAAC,CAAC","sourcesContent":["import { Command } from '@commands/CommandInterface';\nimport { CommandRegistry } from '@commands/CommandRegistry';\nimport { Player, allPlayers } from \"@game/player\";\nimport * as ItemTemplateLoad from '@game/item_template/load';\nimport * as ItemTemplate from '@game/item_template/index';\nimport * as BackpackAdd from '@game/item/backpack/addItem';\nimport * as BackpackInteract from '@game/item/backpack';\n\nexport class OrganizationOnlineCommand implements Command {\n  name = \"sendalert\";\n  alias = \"sa\";\n  \n  execute(sender: Player, args: any): void {\n    console.log(`${sender.syncData.Name} enviou um alerta. Args: ${args}`);\n\n    allPlayers.map(x => {\n      x.sendNotification({\n        Title: 'Alerta Admin',\n        Content: args.join(\" \")\n      });\n    })\n  }\n}\nCommandRegistry.register(new OrganizationOnlineCommand());\n\nexport class ReloadItems implements Command {\n  name = \"reloaditems\";\n  alias = \"ritems\";\n  \n  execute(sender: Player, args: any): void {\n    ItemTemplateLoad.Init(true);\n    \n    sender.sendNotification({\n      Title: 'Alerta Admin',\n      Content: \"Item Templates atualizados\"\n    });\n  }\n}\nCommandRegistry.register(new ReloadItems());\n\nexport class GiveItem implements Command {\n  name = \"giveitem\";\n  alias = \"gitem\";\n  async = true;\n\n  async executeAsync(sender: Player, args: any): Promise<void> {\n    let itemName = args.join(\" \")\n\n    let itemTemplate = ItemTemplate.GetByName(itemName)\n    if (itemTemplate == null) {\n      sender.sendNotification({\n        Title: 'Alerta Admin',\n        Content: \"O item \" + itemName + \" não foi encontrado.\"\n      });\n      return;\n    }\n\n    if (sender.syncData.equipments.bag == null) {\n      sender.sendNotification({\n        Title: 'Alerta Admin',\n        Content: \"Você não tem uma mochila equipada.\"\n      });\n      return;\n    }\n\n    await BackpackAdd.AddItem(null, sender.syncData.equipments.bag, itemTemplate.id, 1);\n    await BackpackInteract.Update(sender, sender.syncData.equipments.bag);\n\n    sender.sendNotification({\n      Title: 'Alerta Admin',\n      Content: \"Você recebeu um(a) \" + itemName + \".\"\n    });\n  }\n}\nCommandRegistry.register(new GiveItem());\n"]}