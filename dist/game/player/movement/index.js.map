{"version":3,"file":"index.js","sourceRoot":"/","sources":["game/player/movement/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { Player } from '@game/player';\nimport { Rotation, MoveData } from '@utils/interface';\nimport { ground } from '@game/state';\n\nPlayer.prototype.Move = function (data: MoveData): void {\n  if (ground.HaveAnyTileToHover(this.syncData.InLayer, data.Pos.x, data.Pos.y)) {\n    this.socket.emit(\"map:HoverYTile\", { ID: this.syncData.ID, Toggle: true });\n  }\n  else {\n    this.socket.emit(\"map:HoverYTile\", { ID: this.syncData.ID, Toggle: false });\n  }\n\n  if (ground.GetCollision(this.syncData.InLayer, data.Pos.x, data.Pos.y)) {\n    this.socket.emit(\"CharacterTeleport\", { ID: this.syncData.ID, Data: { Rot: 0, Pos: this.syncData.Position } });\n    this.socket.emit(\"UpdatePositionTileEditor\", { ID: this.syncData.ID, Data: data });\n    this.CheckSafeZone();\n    return;\n  }\n\n  ground.FreeCollision(this.syncData.InLayer, this.syncData.Position.x, this.syncData.Position.y);\n  this.syncData.Position.x = data.Pos.x;\n  this.syncData.Position.y = data.Pos.y;\n  ground.SetCollision(this.syncData.InLayer, this.syncData.Position.x, this.syncData.Position.y);\n  this.CheckSafeZone();\n\n  this.socket.broadcast.emit(\"CharacterMove\", { ID: this.syncData.ID, Data: data });\n  this.socket.emit(\"UpdatePositionTileEditor\", { ID: this.syncData.ID, Data: data });\n}\n\nPlayer.prototype.MoveDir = function (rot: Rotation): void {\n  var tmpPos = { x: this.syncData.Position.x, y: this.syncData.Position.y };\n  if (rot === Rotation.Left) {\n      tmpPos.x--;\n  }\n  if (rot === Rotation.Top) {\n      tmpPos.y--;\n  }\n  if (rot === Rotation.Right) {\n      tmpPos.x++;\n  }\n  if (rot === Rotation.Down) {\n      tmpPos.y++;\n  }\n\n  var data = { Rot: rot, Pos: tmpPos };\n  this.Move(data);\n}\n\nPlayer.prototype.CanMove = function (): boolean {\n  return true;\n}\n\nPlayer.prototype.CheckSafeZone = function (): void {\n  if (!this.InSafeZone() && ground.SafeZone(this.syncData.InLayer, this.syncData.Position.x, this.syncData.Position.y)) {\n    this.inSafeZone = true;\n    this.socket.emit(\"character:textNotification\", { Message: \"Você entrou em uma safezone.\"});\n  }\n  else if (this.InSafeZone() && !ground.SafeZone(this.syncData.InLayer, this.syncData.Position.x, this.syncData.Position.y)) {\n    this.inSafeZone = false;\n    this.socket.emit(\"character:textNotification\", { Message: \"Você saiu de uma safezone.\"});\n  }\n}\n"]}