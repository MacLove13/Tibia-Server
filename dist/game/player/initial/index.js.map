{"version":3,"file":"index.js","sourceRoot":"/","sources":["game/player/initial/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,oDAAsC;AACtC,qCAAsC;AAEtC,kEAAoD;AAEpD,MAAM,wBAAwB,GAAG,CAAC,CAAC;AAEnC,SAAS,kBAAkB,CAAC,MAAc,EAAE,MAAuB;IAEjE,IAAI,MAAM,CAAC,QAAQ,CAAC,UAAU,IAAI,IAAI;QAAE,OAAO;IAC/C,MAAM,QAAQ,GAAG,YAAY,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC;IAEhE,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;QAC7B,MAAM,IAAI,KAAK,CAAC,kDAAkD,CAAC,CAAC;KACrE;IAED,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;QAChB,YAAY,EAAE,MAAM,CAAC,QAAQ,CAAC,KAAK;QACnC,gBAAgB,EAAE,QAAQ,CAAC,EAAE;QAC7B,QAAQ,EAAE,CAAC;KACZ,CAAC,CAAC,IAAI,CAAC,CAAC,IAAS,EAAE,EAAE;QACpB,MAAM,CAAC,QAAQ,CAAC,UAAU,GAAG;YAC3B,MAAM,EAAE,IAAI;YACZ,MAAM,EAAE,IAAI;YACZ,GAAG,EAAE,IAAI,CAAC,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,SAAS,EAAE,IAAI;YACf,KAAK,EAAE,IAAI;YACX,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;SACX,CAAC;QAEF,MAAM,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;QACf,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;QAClB,MAAM,CAAC,QAAQ,CAAC,UAAU,GAAG;YAC3B,MAAM,EAAE,IAAI;YACZ,MAAM,EAAE,IAAI;YACZ,GAAG,EAAE,IAAI;YACT,QAAQ,EAAE,IAAI;YACd,SAAS,EAAE,IAAI;YACf,KAAK,EAAE,IAAI;YACX,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;SACX,CAAC;IACJ,CAAC,CAAC,CAAC;AAGL,CAAC;AAED,qBAAW,CAAC,EAAE,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC","sourcesContent":["import * as SocketIO from 'socket.io';\nimport * as Model from '@models/item';\nimport { serverEvent } from '@events';\nimport { Player } from '@game/player';\nimport * as ItemTemplate from '@game/item_template';\n\nconst BACKPACK_ITEMTEMPLATE_ID = 2;\n\nfunction createInitialItems(player: Player, socket: SocketIO.Socket) {\n\n  if (player.syncData.equipments != null) return;\n  const backpack = ItemTemplate.GetByID(BACKPACK_ITEMTEMPLATE_ID);\n\n  if (!backpack || !backpack.id) {\n    throw new Error('Backpack não encontrado ou ID não está definido.');\n  }\n\n  Model.Item.create({\n    character_id: player.syncData.SqlID,\n    item_template_id: backpack.id,\n    quantity: 1\n  }).then((item: any) => {\n    player.syncData.equipments = {\n      helmet: null,\n      amulet: null,\n      bag: item.uuid,\n      leftHand: null,\n      rightHand: null,\n      armor: null,\n      legs: null,\n      boot: null,\n      ring: null,\n      ammo: null,\n    };\n\n    player.Save();\n  }).catch(error => {\n    console.log(error)\n    player.syncData.equipments = {\n      helmet: null,\n      amulet: null,\n      bag: null,\n      leftHand: null,\n      rightHand: null,\n      armor: null,\n      legs: null,\n      boot: null,\n      ring: null,\n      ammo: null,\n    };\n  });\n\n  \n}\n\nserverEvent.on('user:connect', createInitialItems);\n"]}