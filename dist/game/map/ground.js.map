{"version":3,"file":"ground.js","sourceRoot":"/","sources":["game/map/ground.ts"],"names":[],"mappings":"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","sourcesContent":["import { mapLayers } from '@game/map';\n\nexport class Ground {\n    GetCollision(layer: number, x: number, y: number) {\n        if (mapLayers[layer] == undefined) return true;\n        // return true if have colision\n\n        const detailsLayer = layer + 1;\n\n        const tile = mapLayers[layer].tiles.find(tile => tile.x === x && tile.y === y);\n        const detailTile = mapLayers[detailsLayer].tiles.find(tile => tile.x === x && tile.y === y);\n\n        if (!tile)\n            return true;\n\n        if (detailTile)\n            return !detailTile.walkable;\n\n        return !tile.walkable;\n    }\n    \n    SetCollision(layer: number, x: number, y: number) {\n        if (mapLayers[layer] == undefined) return;\n        const tile = mapLayers[layer].tiles.find(tile => tile.x === x && tile.y === y);\n\n        if (!tile) return;\n        tile.walkable = false;\n    }\n\n    FreeCollision(layer: number, x: number, y: number) {\n        if (mapLayers[layer] == undefined) return;\n        const tile = mapLayers[layer].tiles.find(tile => tile.x === x && tile.y === y);\n\n        if (!tile) return;\n        tile.walkable = true;\n    }\n\n    SafeZone(layer: number, x: number, y: number) {\n        if (mapLayers[layer] == undefined) return false;\n        const tile = mapLayers[layer].tiles.find(tile => tile.x === x && tile.y === y);\n\n        if (!tile) return;\n        return tile.safeZone;\n    }\n\n    HaveAnyTileToHover(layer: number, x: number, y: number) {\n        if (mapLayers[layer] == undefined) return false;\n        y = y - 1;\n        layer = layer + 1;\n\n        const tileUp = mapLayers[layer].tiles.find(tile => tile.x === x && tile.y === y);\n        const tileLeft = mapLayers[layer].tiles.find(tile => tile.x === (x - 1) && tile.y === (y + 1));\n        const tile2 = mapLayers[layer].tiles.find(tile => tile.x === (x - 1) && tile.y === y);\n        const tile3 = mapLayers[layer].tiles.find(tile => tile.x === (x + 1) && tile.y === y);\n\n        let result = false;\n\n        if (tileUp)\n            if (!tileUp.walkable) result = true;\n\n        if (tileLeft)\n            if (!tileLeft.walkable) result = true;\n\n        if (tile2)\n            if (!tile2.walkable) result = true;\n\n        if (tile3)\n            if (!tile3.walkable) result = true;\n\n        return result;\n    }\n}\n\n"]}